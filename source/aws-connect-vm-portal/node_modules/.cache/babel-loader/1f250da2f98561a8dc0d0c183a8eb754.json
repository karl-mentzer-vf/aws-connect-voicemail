{"ast":null,"code":"/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/import React,{Component}from'react';import{withStyles,Grid,FormControl,InputLabel,Input}from\"@material-ui/core\";import AsyncButton from\"../common/components/AsyncButton\";import{ContactFlowAction}from\"../store/actions/contact-flow.actions\";import{connect}from\"react-redux\";import AuthRoles from\"../auth/AuthRoles\";const styles=theme=>({...theme.modal,root:{padding:0}});class ContactFlow extends Component{constructor(props){super(props);this.handleDownload=()=>{// console.log(\"Download\");\nlet settings={welcomeMessage:this.state.welcomeMessage,defaultErrorMessage:this.state.defaultErrorMessage,maxVoicemailDuration:this.state.maxVoicemailDuration,durationType:\"SECOND\",fallbackQueueName:this.state.fallbackQueueName,errorLoopCount:this.state.errorLoopCount};this.props.download(settings);};this.handleInputChange=event=>{event.preventDefault();// console.log(event.target);\n// console.log(event.target.id, event.target.name);\nthis.setState({...this.state,[event.target.name]:event.target.value});};this.state={welcomeMessage:\"Welcome\",defaultErrorMessage:\"Thank you and have a wonderful day\",maxVoicemailDuration:60,durationType:\"SECOND\",fallbackQueueName:\"BasicQueue\",errorLoopCount:3};}render(){let classes=this.props.classes;return/*#__PURE__*/React.createElement(\"div\",{className:classes.root},/*#__PURE__*/React.createElement(\"h6\",{className:classes.title},\"Generate Contact Flow\"),/*#__PURE__*/React.createElement(Grid,{className:classes.inputsContainer,container:true,direction:\"column\"},/*#__PURE__*/React.createElement(FormControl,null,/*#__PURE__*/React.createElement(InputLabel,{type:\"text\",htmlFor:\"welcome-message\"},\"Welcome Message\"),/*#__PURE__*/React.createElement(Input,{id:\"welcome-message\",disableUnderline:true,readOnly:false,name:\"welcomeMessage\",value:this.state.welcomeMessage,onChange:this.handleInputChange})),/*#__PURE__*/React.createElement(FormControl,null,/*#__PURE__*/React.createElement(InputLabel,{htmlFor:\"fallback-queue-name\"},\"Fallback Queue\"),/*#__PURE__*/React.createElement(Input,{id:\"fallback-queue-name\",disableUnderline:true,readOnly:false,name:\"fallbackQueueName\",value:this.state.fallbackQueueName,onChange:this.handleInputChange})),/*#__PURE__*/React.createElement(FormControl,null,/*#__PURE__*/React.createElement(InputLabel,{type:\"text\",htmlFor:\"default-error-message\"},\"Default Error Message\"),/*#__PURE__*/React.createElement(Input,{id:\"default-error-message\",disableUnderline:true,readOnly:false,name:\"defaultErrorMessage\",value:this.state.defaultErrorMessage,onChange:this.handleInputChange})),/*#__PURE__*/React.createElement(FormControl,null,/*#__PURE__*/React.createElement(InputLabel,{htmlFor:\"max-vm-duration\"},\"Max Voicemail Duration (sec.)\"),/*#__PURE__*/React.createElement(Input,{type:\"number\",inputProps:{min:\"1\",max:\"120\",step:\"1\"},id:\"max-vm-duration\",disableUnderline:true,readOnly:false,name:\"maxVoicemailDuration\",value:this.state.maxVoicemailDuration,onChange:this.handleInputChange})),/*#__PURE__*/React.createElement(FormControl,null,/*#__PURE__*/React.createElement(InputLabel,{htmlFor:\"loop-count\"},\"Incorrect Extension Loop Count\"),/*#__PURE__*/React.createElement(Input,{type:\"number\",inputProps:{min:\"0\",max:\"10\",step:\"1\"},id:\"loop-count\",disableUnderline:true,readOnly:false,name:\"errorLoopCount\",value:this.state.errorLoopCount,onChange:this.handleInputChange}))),this.props.downloadError?/*#__PURE__*/React.createElement(\"p\",{className:classes.error},this.props.downloadError):null,/*#__PURE__*/React.createElement(Grid,{className:classes.padTop,container:true,spacing:5,direction:\"row\"},/*#__PURE__*/React.createElement(Grid,{item:true},/*#__PURE__*/React.createElement(AsyncButton,{loading:this.props.downloading,color:\"primary\",variant:\"contained\",onClick:this.handleDownload,disabled:this.props.userRole!=\"Administrator\"},\"Download\"))));}}const mapStateToProps=state=>{let role=\"\";if(!state.auth.user){return{userEmail:null,userRole:null};}let roles=state.auth.user[\"roles\"];if(roles.includes(AuthRoles.MANAGER)){role=\"Manager\";}if(roles.includes(AuthRoles.ADMIN)){role=\"Administrator\";}return{downloading:state.contactFlow.downloading,downloadError:state.contactFlow.downloadError,userRole:role};};const mapDispatchToProps=dispatch=>{return{showModal:show=>dispatch(ContactFlowAction.showModal(show)),download:contactFlowDto=>dispatch(ContactFlowAction.download(contactFlowDto))};};export default connect(mapStateToProps,mapDispatchToProps)(withStyles(styles)(ContactFlow));","map":{"version":3,"names":["React","Component","withStyles","Grid","FormControl","InputLabel","Input","AsyncButton","ContactFlowAction","connect","AuthRoles","styles","theme","modal","root","padding","ContactFlow","constructor","props","handleDownload","settings","welcomeMessage","state","defaultErrorMessage","maxVoicemailDuration","durationType","fallbackQueueName","errorLoopCount","download","handleInputChange","event","preventDefault","setState","target","name","value","render","classes","createElement","className","title","inputsContainer","container","direction","type","htmlFor","id","disableUnderline","readOnly","onChange","inputProps","min","max","step","downloadError","error","padTop","spacing","item","loading","downloading","color","variant","onClick","disabled","userRole","mapStateToProps","role","auth","user","userEmail","roles","includes","MANAGER","ADMIN","contactFlow","mapDispatchToProps","dispatch","showModal","show","contactFlowDto"],"sources":["/home/ec2-user/environment/aws-connect-voicemail/source/aws-connect-vm-portal/src/contact-flow/ContactFlow.js"],"sourcesContent":["/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/\n\nimport React, {Component} from 'react';\nimport {\n    withStyles,\n    Grid,\n    FormControl,\n    InputLabel, Input\n} from \"@material-ui/core\";\nimport AsyncButton from \"../common/components/AsyncButton\";\nimport {ContactFlowAction} from \"../store/actions/contact-flow.actions\";\nimport {connect} from \"react-redux\";\nimport AuthRoles from \"../auth/AuthRoles\";\n\nconst styles = (theme) => ({\n    ...theme.modal,\n    root: {\n        padding: 0\n    }\n});\n\nclass ContactFlow extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            welcomeMessage: \"Welcome\",\n            defaultErrorMessage: \"Thank you and have a wonderful day\",\n            maxVoicemailDuration: 60,\n            durationType: \"SECOND\",\n            fallbackQueueName: \"BasicQueue\",\n            errorLoopCount: 3\n        }\n    }\n\n    handleDownload = () => {\n        // console.log(\"Download\");\n        let settings = {\n            welcomeMessage: this.state.welcomeMessage,\n            defaultErrorMessage: this.state.defaultErrorMessage,\n            maxVoicemailDuration: this.state.maxVoicemailDuration,\n            durationType: \"SECOND\",\n            fallbackQueueName: this.state.fallbackQueueName,\n            errorLoopCount: this.state.errorLoopCount\n        };\n        this.props.download(settings);\n    };\n\n    handleInputChange = (event) => {\n        event.preventDefault();\n        // console.log(event.target);\n        // console.log(event.target.id, event.target.name);\n        this.setState({\n            ...this.state,\n            [event.target.name]: event.target.value\n        });\n    };\n\n    render() {\n\n        let classes = this.props.classes;\n\n        return(\n            <div className={classes.root}>\n                <h6 className={classes.title}>Generate Contact Flow</h6>\n                <Grid className={classes.inputsContainer} container direction={\"column\"}>\n                    <FormControl>\n                        <InputLabel type={\"text\"} htmlFor=\"welcome-message\">Welcome Message</InputLabel>\n                        <Input id=\"welcome-message\" disableUnderline={true} readOnly={false}  name={\"welcomeMessage\"}  value={this.state.welcomeMessage} onChange={this.handleInputChange}/>\n                    </FormControl>\n                    <FormControl>\n                        <InputLabel htmlFor=\"fallback-queue-name\">Fallback Queue</InputLabel>\n                        <Input id=\"fallback-queue-name\" disableUnderline={true} readOnly={false} name={\"fallbackQueueName\"} value={this.state.fallbackQueueName} onChange={this.handleInputChange}/>\n                    </FormControl>\n                    <FormControl>\n                        <InputLabel type={\"text\"} htmlFor=\"default-error-message\">Default Error Message</InputLabel>\n                        <Input id=\"default-error-message\" disableUnderline={true} readOnly={false}  name={\"defaultErrorMessage\"}  value={this.state.defaultErrorMessage} onChange={this.handleInputChange}/>\n                    </FormControl>\n                    <FormControl>\n                        <InputLabel htmlFor=\"max-vm-duration\">Max Voicemail Duration (sec.)</InputLabel>\n                        <Input type={\"number\"} inputProps={{ min: \"1\", max: \"120\", step: \"1\" }} id=\"max-vm-duration\" disableUnderline={true} readOnly={false} name={\"maxVoicemailDuration\"}  value={this.state.maxVoicemailDuration} onChange={this.handleInputChange}/>\n                    </FormControl>\n                    <FormControl>\n                        <InputLabel htmlFor=\"loop-count\">Incorrect Extension Loop Count</InputLabel>\n                        <Input type={\"number\"} inputProps={{ min: \"0\", max: \"10\", step: \"1\" }} id=\"loop-count\" disableUnderline={true} readOnly={false} name={\"errorLoopCount\"} value={this.state.errorLoopCount} onChange={this.handleInputChange}/>\n                    </FormControl>\n                </Grid>\n                {(this.props.downloadError) ?\n                    <p className={classes.error}>\n                        {this.props.downloadError}\n                    </p> :\n                    null\n                }\n                <Grid className={classes.padTop} container spacing={5} direction=\"row\">\n                    <Grid item>\n                        <AsyncButton loading={this.props.downloading} color=\"primary\" variant=\"contained\" onClick={this.handleDownload} disabled={this.props.userRole != \"Administrator\"}>Download</AsyncButton>\n                    </Grid>\n                </Grid>\n            </div>\n        )\n\n    }\n\n}\n\nconst mapStateToProps = (state) => {\n    let role = \"\";\n    if (!state.auth.user) {\n        return {\n            userEmail: null,\n            userRole: null\n        }\n    }\n\n    let roles = state.auth.user[\"roles\"];\n    if (roles.includes(AuthRoles.MANAGER)) {\n        role = \"Manager\";\n    }\n\n    if (roles.includes(AuthRoles.ADMIN)) {\n        role = \"Administrator\"\n    }\n\n    return {\n        downloading: state.contactFlow.downloading,\n        downloadError: state.contactFlow.downloadError,\n        userRole: role\n    }\n};\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        showModal: (show) => dispatch(ContactFlowAction.showModal(show)),\n        download: (contactFlowDto) => dispatch(ContactFlowAction.download(contactFlowDto))\n    }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(ContactFlow))\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+EAEA,MAAO,CAAAA,KAAK,EAAGC,SAAS,KAAO,OAAO,CACtC,OACIC,UAAU,CACVC,IAAI,CACJC,WAAW,CACXC,UAAU,CAAEC,KAAK,KACd,mBAAmB,CAC1B,MAAO,CAAAC,WAAW,KAAM,kCAAkC,CAC1D,OAAQC,iBAAiB,KAAO,uCAAuC,CACvE,OAAQC,OAAO,KAAO,aAAa,CACnC,MAAO,CAAAC,SAAS,KAAM,mBAAmB,CAEzC,KAAM,CAAAC,MAAM,CAAIC,KAAK,GAAM,CACvB,GAAGA,KAAK,CAACC,KAAK,CACdC,IAAI,CAAE,CACFC,OAAO,CAAE,CACb,CACJ,CAAC,CAAC,CAEF,KAAM,CAAAC,WAAW,QAAS,CAAAf,SAAU,CAEhCgB,WAAWA,CAACC,KAAK,CAAE,CACf,KAAK,CAACA,KAAK,CAAC,CAAC,KAWjBC,cAAc,CAAG,IAAM,CACnB;AACA,GAAI,CAAAC,QAAQ,CAAG,CACXC,cAAc,CAAE,IAAI,CAACC,KAAK,CAACD,cAAc,CACzCE,mBAAmB,CAAE,IAAI,CAACD,KAAK,CAACC,mBAAmB,CACnDC,oBAAoB,CAAE,IAAI,CAACF,KAAK,CAACE,oBAAoB,CACrDC,YAAY,CAAE,QAAQ,CACtBC,iBAAiB,CAAE,IAAI,CAACJ,KAAK,CAACI,iBAAiB,CAC/CC,cAAc,CAAE,IAAI,CAACL,KAAK,CAACK,cAC/B,CAAC,CACD,IAAI,CAACT,KAAK,CAACU,QAAQ,CAACR,QAAQ,CAAC,CACjC,CAAC,MAEDS,iBAAiB,CAAIC,KAAK,EAAK,CAC3BA,KAAK,CAACC,cAAc,CAAC,CAAC,CACtB;AACA;AACA,IAAI,CAACC,QAAQ,CAAC,CACV,GAAG,IAAI,CAACV,KAAK,CACb,CAACQ,KAAK,CAACG,MAAM,CAACC,IAAI,EAAGJ,KAAK,CAACG,MAAM,CAACE,KACtC,CAAC,CAAC,CACN,CAAC,CA/BG,IAAI,CAACb,KAAK,CAAG,CACTD,cAAc,CAAE,SAAS,CACzBE,mBAAmB,CAAE,oCAAoC,CACzDC,oBAAoB,CAAE,EAAE,CACxBC,YAAY,CAAE,QAAQ,CACtBC,iBAAiB,CAAE,YAAY,CAC/BC,cAAc,CAAE,CACpB,CAAC,CACL,CAyBAS,MAAMA,CAAA,CAAG,CAEL,GAAI,CAAAC,OAAO,CAAG,IAAI,CAACnB,KAAK,CAACmB,OAAO,CAEhC,mBACIrC,KAAA,CAAAsC,aAAA,QAAKC,SAAS,CAAEF,OAAO,CAACvB,IAAK,eACzBd,KAAA,CAAAsC,aAAA,OAAIC,SAAS,CAAEF,OAAO,CAACG,KAAM,EAAC,uBAAyB,CAAC,cACxDxC,KAAA,CAAAsC,aAAA,CAACnC,IAAI,EAACoC,SAAS,CAAEF,OAAO,CAACI,eAAgB,CAACC,SAAS,MAACC,SAAS,CAAE,QAAS,eACpE3C,KAAA,CAAAsC,aAAA,CAAClC,WAAW,mBACRJ,KAAA,CAAAsC,aAAA,CAACjC,UAAU,EAACuC,IAAI,CAAE,MAAO,CAACC,OAAO,CAAC,iBAAiB,EAAC,iBAA2B,CAAC,cAChF7C,KAAA,CAAAsC,aAAA,CAAChC,KAAK,EAACwC,EAAE,CAAC,iBAAiB,CAACC,gBAAgB,CAAE,IAAK,CAACC,QAAQ,CAAE,KAAM,CAAEd,IAAI,CAAE,gBAAiB,CAAEC,KAAK,CAAE,IAAI,CAACb,KAAK,CAACD,cAAe,CAAC4B,QAAQ,CAAE,IAAI,CAACpB,iBAAkB,CAAC,CAC1J,CAAC,cACd7B,KAAA,CAAAsC,aAAA,CAAClC,WAAW,mBACRJ,KAAA,CAAAsC,aAAA,CAACjC,UAAU,EAACwC,OAAO,CAAC,qBAAqB,EAAC,gBAA0B,CAAC,cACrE7C,KAAA,CAAAsC,aAAA,CAAChC,KAAK,EAACwC,EAAE,CAAC,qBAAqB,CAACC,gBAAgB,CAAE,IAAK,CAACC,QAAQ,CAAE,KAAM,CAACd,IAAI,CAAE,mBAAoB,CAACC,KAAK,CAAE,IAAI,CAACb,KAAK,CAACI,iBAAkB,CAACuB,QAAQ,CAAE,IAAI,CAACpB,iBAAkB,CAAC,CAClK,CAAC,cACd7B,KAAA,CAAAsC,aAAA,CAAClC,WAAW,mBACRJ,KAAA,CAAAsC,aAAA,CAACjC,UAAU,EAACuC,IAAI,CAAE,MAAO,CAACC,OAAO,CAAC,uBAAuB,EAAC,uBAAiC,CAAC,cAC5F7C,KAAA,CAAAsC,aAAA,CAAChC,KAAK,EAACwC,EAAE,CAAC,uBAAuB,CAACC,gBAAgB,CAAE,IAAK,CAACC,QAAQ,CAAE,KAAM,CAAEd,IAAI,CAAE,qBAAsB,CAAEC,KAAK,CAAE,IAAI,CAACb,KAAK,CAACC,mBAAoB,CAAC0B,QAAQ,CAAE,IAAI,CAACpB,iBAAkB,CAAC,CAC1K,CAAC,cACd7B,KAAA,CAAAsC,aAAA,CAAClC,WAAW,mBACRJ,KAAA,CAAAsC,aAAA,CAACjC,UAAU,EAACwC,OAAO,CAAC,iBAAiB,EAAC,+BAAyC,CAAC,cAChF7C,KAAA,CAAAsC,aAAA,CAAChC,KAAK,EAACsC,IAAI,CAAE,QAAS,CAACM,UAAU,CAAE,CAAEC,GAAG,CAAE,GAAG,CAAEC,GAAG,CAAE,KAAK,CAAEC,IAAI,CAAE,GAAI,CAAE,CAACP,EAAE,CAAC,iBAAiB,CAACC,gBAAgB,CAAE,IAAK,CAACC,QAAQ,CAAE,KAAM,CAACd,IAAI,CAAE,sBAAuB,CAAEC,KAAK,CAAE,IAAI,CAACb,KAAK,CAACE,oBAAqB,CAACyB,QAAQ,CAAE,IAAI,CAACpB,iBAAkB,CAAC,CACtO,CAAC,cACd7B,KAAA,CAAAsC,aAAA,CAAClC,WAAW,mBACRJ,KAAA,CAAAsC,aAAA,CAACjC,UAAU,EAACwC,OAAO,CAAC,YAAY,EAAC,gCAA0C,CAAC,cAC5E7C,KAAA,CAAAsC,aAAA,CAAChC,KAAK,EAACsC,IAAI,CAAE,QAAS,CAACM,UAAU,CAAE,CAAEC,GAAG,CAAE,GAAG,CAAEC,GAAG,CAAE,IAAI,CAAEC,IAAI,CAAE,GAAI,CAAE,CAACP,EAAE,CAAC,YAAY,CAACC,gBAAgB,CAAE,IAAK,CAACC,QAAQ,CAAE,KAAM,CAACd,IAAI,CAAE,gBAAiB,CAACC,KAAK,CAAE,IAAI,CAACb,KAAK,CAACK,cAAe,CAACsB,QAAQ,CAAE,IAAI,CAACpB,iBAAkB,CAAC,CACnN,CACX,CAAC,CACL,IAAI,CAACX,KAAK,CAACoC,aAAa,cACtBtD,KAAA,CAAAsC,aAAA,MAAGC,SAAS,CAAEF,OAAO,CAACkB,KAAM,EACvB,IAAI,CAACrC,KAAK,CAACoC,aACb,CAAC,CACJ,IAAI,cAERtD,KAAA,CAAAsC,aAAA,CAACnC,IAAI,EAACoC,SAAS,CAAEF,OAAO,CAACmB,MAAO,CAACd,SAAS,MAACe,OAAO,CAAE,CAAE,CAACd,SAAS,CAAC,KAAK,eAClE3C,KAAA,CAAAsC,aAAA,CAACnC,IAAI,EAACuD,IAAI,oBACN1D,KAAA,CAAAsC,aAAA,CAAC/B,WAAW,EAACoD,OAAO,CAAE,IAAI,CAACzC,KAAK,CAAC0C,WAAY,CAACC,KAAK,CAAC,SAAS,CAACC,OAAO,CAAC,WAAW,CAACC,OAAO,CAAE,IAAI,CAAC5C,cAAe,CAAC6C,QAAQ,CAAE,IAAI,CAAC9C,KAAK,CAAC+C,QAAQ,EAAI,eAAgB,EAAC,UAAqB,CACrL,CACJ,CACL,CAAC,CAGd,CAEJ,CAEA,KAAM,CAAAC,eAAe,CAAI5C,KAAK,EAAK,CAC/B,GAAI,CAAA6C,IAAI,CAAG,EAAE,CACb,GAAI,CAAC7C,KAAK,CAAC8C,IAAI,CAACC,IAAI,CAAE,CAClB,MAAO,CACHC,SAAS,CAAE,IAAI,CACfL,QAAQ,CAAE,IACd,CAAC,CACL,CAEA,GAAI,CAAAM,KAAK,CAAGjD,KAAK,CAAC8C,IAAI,CAACC,IAAI,CAAC,OAAO,CAAC,CACpC,GAAIE,KAAK,CAACC,QAAQ,CAAC9D,SAAS,CAAC+D,OAAO,CAAC,CAAE,CACnCN,IAAI,CAAG,SAAS,CACpB,CAEA,GAAII,KAAK,CAACC,QAAQ,CAAC9D,SAAS,CAACgE,KAAK,CAAC,CAAE,CACjCP,IAAI,CAAG,eAAe,CAC1B,CAEA,MAAO,CACHP,WAAW,CAAEtC,KAAK,CAACqD,WAAW,CAACf,WAAW,CAC1CN,aAAa,CAAEhC,KAAK,CAACqD,WAAW,CAACrB,aAAa,CAC9CW,QAAQ,CAAEE,IACd,CAAC,CACL,CAAC,CAED,KAAM,CAAAS,kBAAkB,CAAIC,QAAQ,EAAK,CACrC,MAAO,CACHC,SAAS,CAAGC,IAAI,EAAKF,QAAQ,CAACrE,iBAAiB,CAACsE,SAAS,CAACC,IAAI,CAAC,CAAC,CAChEnD,QAAQ,CAAGoD,cAAc,EAAKH,QAAQ,CAACrE,iBAAiB,CAACoB,QAAQ,CAACoD,cAAc,CAAC,CACrF,CAAC,CACL,CAAC,CAED,cAAe,CAAAvE,OAAO,CAACyD,eAAe,CAAEU,kBAAkB,CAAC,CAAC1E,UAAU,CAACS,MAAM,CAAC,CAACK,WAAW,CAAC,CAAC"},"metadata":{},"sourceType":"module"}