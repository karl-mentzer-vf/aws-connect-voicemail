{"ast":null,"code":"/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/import{AuthActionKey}from\"../actions/auth.actions\";const initialState={loading:false,loginError:null,isAuthenticated:false,// indicate if change password is requested by cognito.\nchangePassword:false,user:{email:\"\",roles:[]}};const reducer=function(){let state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;let action=arguments.length>1?arguments[1]:undefined;switch(action.type){case AuthActionKey.LOGIN_PENDING:return{...state,loading:action.value};case AuthActionKey.LOGIN_ERROR:let changePassword=state.changePassword||false;let result=action.value.error;// once the changePassword is set, we keep it on until the user is successful...\nif(!changePassword&&result){changePassword=result.error._error.name===\"NewPasswordRequired\";}return{...state,changePassword:changePassword,loginError:result};case AuthActionKey.LOGIN:return{...state,isAuthenticated:true,changePassword:false,user:action.value.user};case AuthActionKey.LOGOUT:return{...state,changePassword:false,isAuthenticated:false,user:null};default:{return state;}}};export default reducer;","map":{"version":3,"names":["AuthActionKey","initialState","loading","loginError","isAuthenticated","changePassword","user","email","roles","reducer","state","arguments","length","undefined","action","type","LOGIN_PENDING","value","LOGIN_ERROR","result","error","_error","name","LOGIN","LOGOUT"],"sources":["/home/ec2-user/environment/aws-connect-voicemail/source/aws-connect-vm-portal/src/store/reducers/auth.reducer.ts"],"sourcesContent":["/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/\n\nimport {AuthActionKey} from \"../actions/auth.actions\";\nimport {Reducer} from \"redux\";\n\nconst initialState = {\n    loading: false,\n    loginError: null,\n    isAuthenticated: false,\n\n    // indicate if change password is requested by cognito.\n    changePassword: false,\n    user: {\n        email: \"\",\n        roles: []\n    }\n};\n\nconst reducer: Reducer = (state = initialState, action: any): object => {\n    switch (action.type) {\n        case AuthActionKey.LOGIN_PENDING:\n            return {\n                ...state,\n                loading: action.value\n            };\n        case AuthActionKey.LOGIN_ERROR:\n            let changePassword = state.changePassword || false;\n            let result = action.value.error;\n\n            // once the changePassword is set, we keep it on until the user is successful...\n            if (!changePassword && result) {\n                changePassword = result.error._error.name === \"NewPasswordRequired\";\n            }\n\n            return {\n                ...state,\n                changePassword: changePassword,\n                loginError: result\n            };\n        case AuthActionKey.LOGIN:\n            return {\n                ...state,\n                isAuthenticated: true,\n                changePassword: false,\n                user: action.value.user\n            };\n        case AuthActionKey.LOGOUT:\n            return {\n                ...state,\n                changePassword: false,\n                isAuthenticated: false,\n                user: null\n            };\n        default: {\n            return state;\n        }\n    }\n};\n\nexport default reducer;"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+EAEA,OAAQA,aAAa,KAAO,yBAAyB,CAGrD,KAAM,CAAAC,YAAY,CAAG,CACjBC,OAAO,CAAE,KAAK,CACdC,UAAU,CAAE,IAAI,CAChBC,eAAe,CAAE,KAAK,CAEtB;AACAC,cAAc,CAAE,KAAK,CACrBC,IAAI,CAAE,CACFC,KAAK,CAAE,EAAE,CACTC,KAAK,CAAE,EACX,CACJ,CAAC,CAED,KAAM,CAAAC,OAAgB,CAAG,QAAAA,CAAA,CAA+C,IAA9C,CAAAC,KAAK,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAGV,YAAY,IAAE,CAAAa,MAAW,CAAAH,SAAA,CAAAC,MAAA,GAAAD,SAAA,IAAAE,SAAA,CACvD,OAAQC,MAAM,CAACC,IAAI,EACf,IAAK,CAAAf,aAAa,CAACgB,aAAa,CAC5B,MAAO,CACH,GAAGN,KAAK,CACRR,OAAO,CAAEY,MAAM,CAACG,KACpB,CAAC,CACL,IAAK,CAAAjB,aAAa,CAACkB,WAAW,CAC1B,GAAI,CAAAb,cAAc,CAAGK,KAAK,CAACL,cAAc,EAAI,KAAK,CAClD,GAAI,CAAAc,MAAM,CAAGL,MAAM,CAACG,KAAK,CAACG,KAAK,CAE/B;AACA,GAAI,CAACf,cAAc,EAAIc,MAAM,CAAE,CAC3Bd,cAAc,CAAGc,MAAM,CAACC,KAAK,CAACC,MAAM,CAACC,IAAI,GAAK,qBAAqB,CACvE,CAEA,MAAO,CACH,GAAGZ,KAAK,CACRL,cAAc,CAAEA,cAAc,CAC9BF,UAAU,CAAEgB,MAChB,CAAC,CACL,IAAK,CAAAnB,aAAa,CAACuB,KAAK,CACpB,MAAO,CACH,GAAGb,KAAK,CACRN,eAAe,CAAE,IAAI,CACrBC,cAAc,CAAE,KAAK,CACrBC,IAAI,CAAEQ,MAAM,CAACG,KAAK,CAACX,IACvB,CAAC,CACL,IAAK,CAAAN,aAAa,CAACwB,MAAM,CACrB,MAAO,CACH,GAAGd,KAAK,CACRL,cAAc,CAAE,KAAK,CACrBD,eAAe,CAAE,KAAK,CACtBE,IAAI,CAAE,IACV,CAAC,CACL,QAAS,CACL,MAAO,CAAAI,KAAK,CAChB,CACJ,CACJ,CAAC,CAED,cAAe,CAAAD,OAAO"},"metadata":{},"sourceType":"module"}