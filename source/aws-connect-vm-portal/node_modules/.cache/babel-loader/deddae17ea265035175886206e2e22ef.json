{"ast":null,"code":"import _classCallCheck from\"/home/ec2-user/environment/aws-connect-voicemail/source/aws-connect-vm-portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/ec2-user/environment/aws-connect-voicemail/source/aws-connect-vm-portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/ec2-user/environment/aws-connect-voicemail/source/aws-connect-vm-portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/ec2-user/environment/aws-connect-voicemail/source/aws-connect-vm-portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/import React,{Component}from'react';import{Auth,Hub}from'aws-amplify';import history from\"../history\";var CognitoAuth=/*#__PURE__*/function(_Component){_inherits(CognitoAuth,_Component);var _super=_createSuper(CognitoAuth);function CognitoAuth(props){var _this;_classCallCheck(this,CognitoAuth);_this=_super.call(this,props);// let the Hub module listen on Auth events\nHub.listen('auth',function(data){switch(data.payload.event){case'signIn':history.push('/agents');_this.setState({authState:'signedIn',authData:data.payload.data});break;case'signIn_failure':break;default:break;}});return _this;}_createClass(CognitoAuth,[{key:\"componentDidMount\",value:function componentDidMount(){// we only want to do this if code isn't\nif(!this.props.location||!this.props.location.search.startsWith(\"?code=\")){Auth.currentAuthenticatedUser().then(function(user){history.push('/agents');}).catch(function(e){Auth.federatedSignIn();});}}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"});}}]);return CognitoAuth;}(Component);export default CognitoAuth;","map":{"version":3,"names":["React","Component","Auth","Hub","history","CognitoAuth","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","listen","data","payload","event","push","setState","authState","authData","_createClass","key","value","componentDidMount","location","search","startsWith","currentAuthenticatedUser","then","user","catch","e","federatedSignIn","render","createElement","className"],"sources":["/home/ec2-user/environment/aws-connect-voicemail/source/aws-connect-vm-portal/src/auth/CognitoAuth.js"],"sourcesContent":["/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/\n\nimport React, {Component} from 'react';\nimport {Auth, Hub} from 'aws-amplify';\nimport history from \"../history\";\n\nclass CognitoAuth extends Component {\n  constructor(props) {\n    super(props);\n\n    // let the Hub module listen on Auth events\n    Hub.listen('auth', (data) => {\n      switch (data.payload.event) {\n        case 'signIn':\n          history.push('/agents');\n          this.setState({authState: 'signedIn', authData: data.payload.data});\n          break;\n        case 'signIn_failure':\n          break;\n        default:\n          break;\n      }\n    });\n  }\n\n  componentDidMount() {\n    // we only want to do this if code isn't\n    if (!this.props.location || !this.props.location.search.startsWith(\"?code=\")) {\n      Auth.currentAuthenticatedUser().then(user => {\n        history.push('/agents');\n      }).catch(e => {\n        Auth.federatedSignIn();\n      });\n    }\n  }\n\n  render() {\n    return (\n        <div className=\"App\"/>\n    );\n  }\n}\n\nexport default CognitoAuth;"],"mappings":"gwBAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+EAEA,MAAO,CAAAA,KAAK,EAAGC,SAAS,KAAO,OAAO,CACtC,OAAQC,IAAI,CAAEC,GAAG,KAAO,aAAa,CACrC,MAAO,CAAAC,OAAO,KAAM,YAAY,CAAC,GAE3B,CAAAC,WAAW,uBAAAC,UAAA,EAAAC,SAAA,CAAAF,WAAA,CAAAC,UAAA,MAAAE,MAAA,CAAAC,YAAA,CAAAJ,WAAA,EACf,SAAAA,YAAYK,KAAK,CAAE,KAAAC,KAAA,CAAAC,eAAA,MAAAP,WAAA,EACjBM,KAAA,CAAAH,MAAA,CAAAK,IAAA,MAAMH,KAAK,EAEX;AACAP,GAAG,CAACW,MAAM,CAAC,MAAM,CAAE,SAACC,IAAI,CAAK,CAC3B,OAAQA,IAAI,CAACC,OAAO,CAACC,KAAK,EACxB,IAAK,QAAQ,CACXb,OAAO,CAACc,IAAI,CAAC,SAAS,CAAC,CACvBP,KAAA,CAAKQ,QAAQ,CAAC,CAACC,SAAS,CAAE,UAAU,CAAEC,QAAQ,CAAEN,IAAI,CAACC,OAAO,CAACD,IAAI,CAAC,CAAC,CACnE,MACF,IAAK,gBAAgB,CACnB,MACF,QACE,MAAM,CAEZ,CAAC,CAAC,CAAC,OAAAJ,KAAA,CACL,CAACW,YAAA,CAAAjB,WAAA,GAAAkB,GAAA,qBAAAC,KAAA,CAED,SAAAC,kBAAA,CAAoB,CAClB;AACA,GAAI,CAAC,IAAI,CAACf,KAAK,CAACgB,QAAQ,EAAI,CAAC,IAAI,CAAChB,KAAK,CAACgB,QAAQ,CAACC,MAAM,CAACC,UAAU,CAAC,QAAQ,CAAC,CAAE,CAC5E1B,IAAI,CAAC2B,wBAAwB,EAAE,CAACC,IAAI,CAAC,SAAAC,IAAI,CAAI,CAC3C3B,OAAO,CAACc,IAAI,CAAC,SAAS,CAAC,CACzB,CAAC,CAAC,CAACc,KAAK,CAAC,SAAAC,CAAC,CAAI,CACZ/B,IAAI,CAACgC,eAAe,EAAE,CACxB,CAAC,CAAC,CACJ,CACF,CAAC,GAAAX,GAAA,UAAAC,KAAA,CAED,SAAAW,OAAA,CAAS,CACP,mBACInC,KAAA,CAAAoC,aAAA,QAAKC,SAAS,CAAC,KAAK,EAAE,CAE5B,CAAC,WAAAhC,WAAA,GAlCuBJ,SAAS,EAqCnC,cAAe,CAAAI,WAAW"},"metadata":{},"sourceType":"module"}