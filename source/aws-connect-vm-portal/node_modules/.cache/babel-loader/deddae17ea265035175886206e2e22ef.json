{"ast":null,"code":"/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/import React,{Component}from'react';import{Auth,Hub}from'aws-amplify';import history from\"../history\";class CognitoAuth extends Component{constructor(props){super(props);// let the Hub module listen on Auth events\nHub.listen('auth',data=>{switch(data.payload.event){case'signIn':history.push('/agents');this.setState({authState:'signedIn',authData:data.payload.data});break;case'signIn_failure':break;default:break;}});}componentDidMount(){// we only want to do this if code isn't\nif(!this.props.location||!this.props.location.search.startsWith(\"?code=\")){Auth.currentAuthenticatedUser().then(user=>{history.push('/agents');}).catch(e=>{Auth.federatedSignIn();});}}render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"});}}export default CognitoAuth;","map":{"version":3,"names":["React","Component","Auth","Hub","history","CognitoAuth","constructor","props","listen","data","payload","event","push","setState","authState","authData","componentDidMount","location","search","startsWith","currentAuthenticatedUser","then","user","catch","e","federatedSignIn","render","createElement","className"],"sources":["/home/ec2-user/environment/aws-connect-voicemail/source/aws-connect-vm-portal/src/auth/CognitoAuth.js"],"sourcesContent":["/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/\n\nimport React, {Component} from 'react';\nimport {Auth, Hub} from 'aws-amplify';\nimport history from \"../history\";\n\nclass CognitoAuth extends Component {\n  constructor(props) {\n    super(props);\n\n    // let the Hub module listen on Auth events\n    Hub.listen('auth', (data) => {\n      switch (data.payload.event) {\n        case 'signIn':\n          history.push('/agents');\n          this.setState({authState: 'signedIn', authData: data.payload.data});\n          break;\n        case 'signIn_failure':\n          break;\n        default:\n          break;\n      }\n    });\n  }\n\n  componentDidMount() {\n    // we only want to do this if code isn't\n    if (!this.props.location || !this.props.location.search.startsWith(\"?code=\")) {\n      Auth.currentAuthenticatedUser().then(user => {\n        history.push('/agents');\n      }).catch(e => {\n        Auth.federatedSignIn();\n      });\n    }\n  }\n\n  render() {\n    return (\n        <div className=\"App\"/>\n    );\n  }\n}\n\nexport default CognitoAuth;"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+EAEA,MAAO,CAAAA,KAAK,EAAGC,SAAS,KAAO,OAAO,CACtC,OAAQC,IAAI,CAAEC,GAAG,KAAO,aAAa,CACrC,MAAO,CAAAC,OAAO,KAAM,YAAY,CAEhC,KAAM,CAAAC,WAAW,QAAS,CAAAJ,SAAU,CAClCK,WAAWA,CAACC,KAAK,CAAE,CACjB,KAAK,CAACA,KAAK,CAAC,CAEZ;AACAJ,GAAG,CAACK,MAAM,CAAC,MAAM,CAAGC,IAAI,EAAK,CAC3B,OAAQA,IAAI,CAACC,OAAO,CAACC,KAAK,EACxB,IAAK,QAAQ,CACXP,OAAO,CAACQ,IAAI,CAAC,SAAS,CAAC,CACvB,IAAI,CAACC,QAAQ,CAAC,CAACC,SAAS,CAAE,UAAU,CAAEC,QAAQ,CAAEN,IAAI,CAACC,OAAO,CAACD,IAAI,CAAC,CAAC,CACnE,MACF,IAAK,gBAAgB,CACnB,MACF,QACE,MACJ,CACF,CAAC,CAAC,CACJ,CAEAO,iBAAiBA,CAAA,CAAG,CAClB;AACA,GAAI,CAAC,IAAI,CAACT,KAAK,CAACU,QAAQ,EAAI,CAAC,IAAI,CAACV,KAAK,CAACU,QAAQ,CAACC,MAAM,CAACC,UAAU,CAAC,QAAQ,CAAC,CAAE,CAC5EjB,IAAI,CAACkB,wBAAwB,CAAC,CAAC,CAACC,IAAI,CAACC,IAAI,EAAI,CAC3ClB,OAAO,CAACQ,IAAI,CAAC,SAAS,CAAC,CACzB,CAAC,CAAC,CAACW,KAAK,CAACC,CAAC,EAAI,CACZtB,IAAI,CAACuB,eAAe,CAAC,CAAC,CACxB,CAAC,CAAC,CACJ,CACF,CAEAC,MAAMA,CAAA,CAAG,CACP,mBACI1B,KAAA,CAAA2B,aAAA,QAAKC,SAAS,CAAC,KAAK,CAAC,CAAC,CAE5B,CACF,CAEA,cAAe,CAAAvB,WAAW"},"metadata":{},"sourceType":"module"}