{"ast":null,"code":"/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/import React,{Component}from'react';import{connect}from'react-redux';import{AuthAction}from\"../store/actions/auth.actions\";import NavigationBar from\"../navigation/NavigationBar\";import{AgentsAction}from\"../store/actions/agents.actions\";import AgentsTable from\"./AgentsTable\";import{Fade,Dialog,DialogContent,withStyles,Backdrop}from\"@material-ui/core\";import GlobalSettings from\"../global-settings/GlobalSettings\";import{GlobalSettingsAction}from\"../store/actions/global-settings.actions\";import AgentSettings from\"./AgentSettings\";import{ContactFlowAction}from\"../store/actions/contact-flow.actions\";import ContactFlow from\"../contact-flow/ContactFlow\";import requiresAuth from\"../common/requiresAuth\";import AgentsNoAuth from'./AgentsNoAuth';import AuthRoles from\"../auth/AuthRoles\";const styles=theme=>({agentsTable:{margin:25},modal:{display:'flex',alignItems:'center',justifyContent:'center',border:\"1px solid black\"},noFocus:{padding:theme.spacing(2,4,3),\"&:focus\":{outlineWidth:\"0 !important\",outlineStyle:\"none\"}}});class Agents extends Component{constructor(props){super(props);this.state={};}render(){let classes=this.props.classes;if(this.props.role===\"\"){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(NavigationBar,null),/*#__PURE__*/React.createElement(\"p\",null,\" The user you logged in with is not in the \\\"Manager\\\" Cognito User Pool group. You must be a member of this group to view this page.\"));}return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(NavigationBar,null),/*#__PURE__*/React.createElement(AgentsTable,{className:classes.agentsTable}),/*#__PURE__*/React.createElement(Dialog,{scroll:\"paper\",disableAutoFocus:true,open:this.props.showGlobalSettingsModal,closeAfterTransition:true,BackdropComponent:Backdrop,onClose:()=>{this.props.showSettings(false);}},/*#__PURE__*/React.createElement(Fade,{in:this.props.showGlobalSettingsModal},/*#__PURE__*/React.createElement(DialogContent,null,/*#__PURE__*/React.createElement(GlobalSettings,null)))),/*#__PURE__*/React.createElement(Dialog,{scroll:\"paper\",disableAutoFocus:true,open:this.props.showAgentSettings,closeAfterTransition:true,BackdropComponent:Backdrop,onClose:()=>{this.props.showAgentModal(false);}},/*#__PURE__*/React.createElement(Fade,{in:this.props.showAgentSettings},/*#__PURE__*/React.createElement(DialogContent,null,/*#__PURE__*/React.createElement(AgentSettings,null)))),/*#__PURE__*/React.createElement(Dialog,{scroll:\"paper\",disableAutoFocus:true,open:this.props.showContactFlowModal,closeAfterTransition:true,BackdropComponent:Backdrop,onClose:()=>{this.props.showContactFlow(false);}},/*#__PURE__*/React.createElement(Fade,{in:this.props.showContactFlowModal},/*#__PURE__*/React.createElement(DialogContent,null,/*#__PURE__*/React.createElement(ContactFlow,null)))));}}const mapStateToProps=state=>{let role=\"\";if(state.auth.user){let roles=state.auth.user[\"roles\"];if(roles&&roles.includes(AuthRoles.MANAGER)){role=\"Manager\";}if(roles&&roles.includes(AuthRoles.ADMIN)){role=\"Administrator\";}}return{showGlobalSettingsModal:state.globalSettings.showModal,agents:state.agents.agents,agentsSortKey:state.agents.sortKey,agentsSortOrder:state.agents.sortOrder,showAgentSettings:state.agents.showAgentSettings,agent:state.agents.agent,showContactFlowModal:state.contactFlow.showModal,contactFlowDownloading:state.contactFlow.downloading,role:role};};const mapDispatchToProps=dispatch=>{return{logout:()=>dispatch(AuthAction.logout()),getAgents:()=>dispatch(AgentsAction.getAgents()),sortAgents:(sortKey,sortOrder)=>dispatch(AgentsAction.sortAgents(sortKey,sortOrder)),showSettings:show=>dispatch(GlobalSettingsAction.showModal(show)),showAgentModal:(show,agent)=>dispatch(AgentsAction.showAgent(show,agent)),showContactFlow:show=>dispatch(ContactFlowAction.showModal(show)),downloadContactFlow:contactFlowDto=>dispatch(ContactFlowAction.download(contactFlowDto))};};export default connect(mapStateToProps,mapDispatchToProps)(withStyles(styles)(requiresAuth(Agents,AgentsNoAuth)));","map":{"version":3,"names":["React","Component","connect","AuthAction","NavigationBar","AgentsAction","AgentsTable","Fade","Dialog","DialogContent","withStyles","Backdrop","GlobalSettings","GlobalSettingsAction","AgentSettings","ContactFlowAction","ContactFlow","requiresAuth","AgentsNoAuth","AuthRoles","styles","theme","agentsTable","margin","modal","display","alignItems","justifyContent","border","noFocus","padding","spacing","outlineWidth","outlineStyle","Agents","constructor","props","state","render","classes","role","createElement","className","scroll","disableAutoFocus","open","showGlobalSettingsModal","closeAfterTransition","BackdropComponent","onClose","showSettings","in","showAgentSettings","showAgentModal","showContactFlowModal","showContactFlow","mapStateToProps","auth","user","roles","includes","MANAGER","ADMIN","globalSettings","showModal","agents","agentsSortKey","sortKey","agentsSortOrder","sortOrder","agent","contactFlow","contactFlowDownloading","downloading","mapDispatchToProps","dispatch","logout","getAgents","sortAgents","show","showAgent","downloadContactFlow","contactFlowDto","download"],"sources":["/home/ec2-user/environment/aws-connect-voicemail/source/aws-connect-vm-portal/src/agents/Agents.js"],"sourcesContent":["/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/\n\nimport React, {Component} from 'react';\nimport PropTypes from 'prop-types'\nimport {connect} from 'react-redux';\nimport {AuthAction} from \"../store/actions/auth.actions\";\nimport NavigationBar from \"../navigation/NavigationBar\";\nimport {AgentsAction} from \"../store/actions/agents.actions\";\nimport AgentsTable from \"./AgentsTable\";\nimport {Fade, Dialog, DialogContent, withStyles, Backdrop} from \"@material-ui/core\";\nimport GlobalSettings from \"../global-settings/GlobalSettings\";\nimport {GlobalSettingsAction} from \"../store/actions/global-settings.actions\";\nimport AgentSettings from \"./AgentSettings\";\nimport {ContactFlowAction} from \"../store/actions/contact-flow.actions\";\nimport ContactFlow from \"../contact-flow/ContactFlow\";\nimport requiresAuth from \"../common/requiresAuth\";\nimport AgentsNoAuth from './AgentsNoAuth';\nimport AuthRoles from \"../auth/AuthRoles\";\n\nconst styles = (theme) => ({\n    agentsTable: {\n        margin: 25\n    },\n    modal: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        border: \"1px solid black\"\n    },\n    noFocus: {\n        padding: theme.spacing(2, 4, 3),\n        \"&:focus\": {\n            outlineWidth: \"0 !important\",\n            outlineStyle: \"none\"\n        }\n    }\n});\n\nclass Agents extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {}\n    }\n\n    render() {\n        let classes = this.props.classes;\n        if (this.props.role === \"\") {\n            return (\n                <div>\n                    <NavigationBar/>\n                    <p> The user you logged in with is not in the \"Manager\" Cognito User Pool group. You must be a member of this group to view this page.</p>\n                </div>\n            )\n        }\n\n        return (\n            <div>\n                <NavigationBar/>\n                <AgentsTable className={classes.agentsTable}/>\n                <Dialog\n                    scroll=\"paper\"\n                    disableAutoFocus={true}\n                    open={this.props.showGlobalSettingsModal}\n                    closeAfterTransition\n                    BackdropComponent={Backdrop}\n                    onClose={() => {\n                        this.props.showSettings(false)\n                    }}>\n                    <Fade in={this.props.showGlobalSettingsModal}>\n                        <DialogContent>\n                            <GlobalSettings/>\n                        </DialogContent>\n                    </Fade>\n                </Dialog>\n                <Dialog\n                    scroll=\"paper\"\n                    disableAutoFocus={true}\n                    open={this.props.showAgentSettings}\n                    closeAfterTransition\n                    BackdropComponent={Backdrop}\n                    onClose={() => {\n                        this.props.showAgentModal(false)\n                    }}>\n                    <Fade in={this.props.showAgentSettings}>\n                        <DialogContent>\n                            <AgentSettings/>\n                        </DialogContent>\n                    </Fade>\n                </Dialog>\n                <Dialog\n                    scroll=\"paper\"\n                    disableAutoFocus={true}\n                    open={this.props.showContactFlowModal}\n                    closeAfterTransition\n                    BackdropComponent={Backdrop}\n                    onClose={() => {\n                        this.props.showContactFlow(false)\n                    }}>\n                    <Fade in={this.props.showContactFlowModal}>\n                        <DialogContent>\n                            <ContactFlow/>\n                        </DialogContent>\n                    </Fade>\n                </Dialog>\n            </div>\n        )\n    }\n}\n\nAgents.propTypes = {\n    logout: PropTypes.func,\n    showGlobalSettingsModal: PropTypes.bool,\n};\n\nconst mapStateToProps = (state) => {\n    let role = \"\";\n    if (state.auth.user) {\n\n        let roles = state.auth.user[\"roles\"];\n        if (roles && roles.includes(AuthRoles.MANAGER)) {\n            role = \"Manager\";\n        }\n\n        if (roles && roles.includes(AuthRoles.ADMIN)) {\n            role = \"Administrator\"\n        }\n    }\n\n    return {\n        showGlobalSettingsModal: state.globalSettings.showModal,\n        agents: state.agents.agents,\n        agentsSortKey: state.agents.sortKey,\n        agentsSortOrder: state.agents.sortOrder,\n        showAgentSettings: state.agents.showAgentSettings,\n        agent: state.agents.agent,\n        showContactFlowModal: state.contactFlow.showModal,\n        contactFlowDownloading: state.contactFlow.downloading,\n        role: role\n    }\n};\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        logout: () => dispatch(AuthAction.logout()),\n        getAgents: () => dispatch(AgentsAction.getAgents()),\n        sortAgents: (sortKey, sortOrder) => dispatch(AgentsAction.sortAgents(sortKey, sortOrder)),\n        showSettings: (show) => dispatch(GlobalSettingsAction.showModal(show)),\n        showAgentModal: (show, agent) => dispatch(AgentsAction.showAgent(show, agent)),\n        showContactFlow: (show) => dispatch(ContactFlowAction.showModal(show)),\n        downloadContactFlow: (contactFlowDto) => dispatch(ContactFlowAction.download(contactFlowDto))\n    }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(requiresAuth(Agents, AgentsNoAuth)));"],"mappings":"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"},"metadata":{},"sourceType":"module"}