{"modules":[{"id":"b5bc6e4a-a590-4481-bb92-f485d14f6e28","type":"SetLoggingBehavior","branches":[{"condition":"Success","transition":"9e187e04-8308-4c08-b42e-0ab7663d2245"}],"parameters":[{"name":"LoggingBehavior","value":"Enable"}],"metadata":{"position":{"x":197,"y":52}}},{"id":"4a9e6603-dde2-4395-8d4e-4be57d7f7312","type":"SetContactFlow","branches":[{"condition":"Success","transition":"c605c995-7168-4213-bbf7-430d09f6b106"}],"parameters":[{"name":"ContactFlowId","value":"","resourceName":"VM-Agent"},{"name":"Type","value":"CustomerQueue"}],"metadata":{"position":{"x":1039,"y":529},"contactFlow":{"id":"","text":"VM-Agent"},"customerOrAgent":false}},{"id":"6363795b-2c86-4a0b-94f3-7c00fb81bb72","type":"SetAttributes","branches":[{"condition":"Success","transition":"d03dc4f9-ea5f-40c3-adb7-5a72ebc3b198"},{"condition":"Error","transition":"d03dc4f9-ea5f-40c3-adb7-5a72ebc3b198"}],"parameters":[{"name":"Attribute","value":"true","key":"available","namespace":null}],"metadata":{"position":{"x":1343,"y":290}}},{"id":"c605c995-7168-4213-bbf7-430d09f6b106","type":"CheckStaffing","branches":[{"condition":"True","transition":"6363795b-2c86-4a0b-94f3-7c00fb81bb72"},{"condition":"False","transition":"d03dc4f9-ea5f-40c3-adb7-5a72ebc3b198"},{"condition":"Error","transition":"d03dc4f9-ea5f-40c3-adb7-5a72ebc3b198"}],"parameters":[{"name":"Status","value":"Available"}],"metadata":{"position":{"x":1304,"y":24},"useDynamic":false,"queue":null}},{"id":"d03dc4f9-ea5f-40c3-adb7-5a72ebc3b198","type":"Transfer","branches":[{"condition":"AtCapacity","transition":"ccacbfd4-bc57-4d64-9cc4-4665c98dcd4a"},{"condition":"Error","transition":"730965ba-570c-4856-a27d-25955922bb6d"}],"parameters":[],"metadata":{"position":{"x":1652,"y":165},"useDynamic":false,"queue":null},"target":"Queue"},{"id":"9878c05d-1152-4a04-b8a5-a44221497364","type":"SetAttributes","branches":[{"condition":"Success","transition":"e9961d17-9a6f-4dfb-93c6-84fe59f13b7a"},{"condition":"Error","transition":"e9961d17-9a6f-4dfb-93c6-84fe59f13b7a"}],"parameters":[{"name":"Attribute","value":"agentId","key":"agentId","namespace":"External"},{"name":"Attribute","value":"agentName","key":"agentName","namespace":"External"},{"name":"Attribute","value":"transferMessage","key":"transferMessage","namespace":"External"},{"name":"Attribute","value":"transcribeVoicemail","key":"transcribeVoicemail","namespace":"External"},{"name":"Attribute","value":"saveCallRecording","key":"saveCallRecording","namespace":"External"},{"name":"Attribute","value":"encryptVoicemail","key":"encryptVoicemail","namespace":"External"}],"metadata":{"position":{"x":672,"y":484}}},{"id":"4217a94c-00e6-4a35-a90e-b14442694f15","type":"SetQueue","branches":[{"condition":"Success","transition":"4a9e6603-dde2-4395-8d4e-4be57d7f7312"},{"condition":"Error","transition":"ae8419f5-d469-4a07-90f1-e1a95fb3c1f9"}],"parameters":[{"name":"Agent","value":"agentId","namespace":"User Defined","resourceName":null}],"metadata":{"position":{"x":989,"y":299},"useDynamic":true,"queue":"agentId"}},{"id":"e9961d17-9a6f-4dfb-93c6-84fe59f13b7a","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"default","transition":"ae8419f5-d469-4a07-90f1-e1a95fb3c1f9"},{"condition":"NoMatch","transition":"4217a94c-00e6-4a35-a90e-b14442694f15"}],"parameters":[{"name":"Attribute","value":"agentName"},{"name":"Namespace","value":"User Defined"}],"metadata":{"position":{"x":920,"y":48},"conditionMetadata":[{"id":"2542a636-e389-4640-8f06-287cc4b815b9","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"default"}]}},{"id":"ccacbfd4-bc57-4d64-9cc4-4665c98dcd4a","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":2183,"y":478}}},{"id":"730965ba-570c-4856-a27d-25955922bb6d","type":"PlayPrompt","branches":[{"condition":"Success","transition":"ccacbfd4-bc57-4d64-9cc4-4665c98dcd4a"}],"parameters":[{"name":"Text","value":"We experienced an issue and are unable to connect you to agent. Sorry for the inconvenience.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1917,"y":466},"useDynamic":false}},{"id":"2b987e46-00c6-4e0a-8dae-1fe55f495f70","type":"SetQueue","branches":[{"condition":"Success","transition":"453aff7e-a46c-40b0-9151-33d985e99d14"},{"condition":"Error","transition":"453aff7e-a46c-40b0-9151-33d985e99d14"}],"parameters":[{"name":"Queue","value":"","namespace":null,"resourceName":"BasicQueue"}],"metadata":{"position":{"x":1373,"y":766},"useDynamic":false,"queue":{"id":"","text":"BasicQueue"}}},{"id":"453aff7e-a46c-40b0-9151-33d985e99d14","type":"Transfer","branches":[{"condition":"AtCapacity","transition":"ccacbfd4-bc57-4d64-9cc4-4665c98dcd4a"},{"condition":"Error","transition":"730965ba-570c-4856-a27d-25955922bb6d"}],"parameters":[],"metadata":{"position":{"x":1670,"y":768},"useDynamic":false,"queue":null},"target":"Queue"},{"id":"9e187e04-8308-4c08-b42e-0ab7663d2245","type":"SetAttributes","branches":[{"condition":"Success","transition":"67571ea6-7168-4887-a016-c6dcdd5b089a"},{"condition":"Error","transition":"ae8419f5-d469-4a07-90f1-e1a95fb3c1f9"}],"parameters":[{"name":"Attribute","value":"Dialed Number","key":"dialedNumber","namespace":"System"}],"metadata":{"position":{"x":247,"y":228}}},{"id":"4363b6a1-b0e2-442d-a468-afbfcd5d3dd4","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"9878c05d-1152-4a04-b8a5-a44221497364"},{"condition":"Error","transition":"ae8419f5-d469-4a07-90f1-e1a95fb3c1f9"}],"parameters":[{"name":"FunctionArn","value":"GetAgentByExtension","namespace":null},{"name":"TimeLimit","value":"8"},{"name":"Parameter","key":"extensionNumber","value":"extensionNumber","namespace":"User Defined"}],"metadata":{"position":{"x":621,"y":259},"dynamicMetadata":{"extensionNumber":true},"useDynamic":false},"target":"Lambda"},{"id":"ae8419f5-d469-4a07-90f1-e1a95fb3c1f9","type":"PlayPrompt","branches":[{"condition":"Success","transition":"2b987e46-00c6-4e0a-8dae-1fe55f495f70"}],"parameters":[{"name":"Text","value":"Hello, thank you for calling. Please wait while we transfer you over to our next available representative.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":984,"y":785},"useDynamic":false}},{"id":"67571ea6-7168-4887-a016-c6dcdd5b089a","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"361a8c43-f9d3-4a68-8832-51c64f407951"},{"condition":"Error","transition":"ae8419f5-d469-4a07-90f1-e1a95fb3c1f9"}],"parameters":[{"name":"FunctionArn","value":"GetExtensionFromDialedNumber","namespace":null},{"name":"TimeLimit","value":"3"}],"metadata":{"position":{"x":296,"y":454},"dynamicMetadata":{},"useDynamic":false},"target":"Lambda"},{"id":"361a8c43-f9d3-4a68-8832-51c64f407951","type":"SetAttributes","branches":[{"condition":"Success","transition":"4363b6a1-b0e2-442d-a468-afbfcd5d3dd4"},{"condition":"Error","transition":"ae8419f5-d469-4a07-90f1-e1a95fb3c1f9"}],"parameters":[{"name":"Attribute","value":"extensionNumber","key":"extensionNumber","namespace":"External"}],"metadata":{"position":{"x":547,"y":51}}}],"version":"1","type":"contactFlow","start":"b5bc6e4a-a590-4481-bb92-f485d14f6e28","metadata":{"entryPointPosition":{"x":41,"y":25},"snapToGrid":false,"name":"VM-Greeting-DID","description":"Initial caller contact to get agent extension","type":"contactFlow","status":"published","hash":"918ffe5358eebb2c3bb6f2d97ae67b95b18208a96c92a2e4b904a00a5d5c7cd4"}}

